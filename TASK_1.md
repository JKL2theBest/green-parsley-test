# Задание 1: Анализ требований к функционалу "Корзина"

## 1. Противоречия и недочеты исходного ТЗ

В ходе анализа фрагмента ТЗ были выявлены следующие логические коллизии и пробелы:

| № | Пункт ТЗ | Проблема / Противоречие | Почему это плохо |
|---|---|---|---|
| 1 | **п. 2 vs п. 9** | **Конфликт логики удаления.** <br>Пункт 2 утверждает, что количество нельзя уменьшить менее 1 (удаление только кнопкой). Пункт 9 утверждает, что при уменьшении до 0 товар удаляется. | Разработчик не поймет, как реализовывать контрол изменения количества (степпер). Пользователь может запутаться в поведении интерфейса. |
| 2 | **п. 7 vs п. 13** | **Конфликт ценообразования.** <br>Пункт 7 говорит, что цена фиксируется при добавлении. Пункт 13 требует автоматического обновления цены в корзине при изменении в каталоге. | Критическое бизнес-противоречие. Это влияет на итоговую сумму заказа и юридические обязательства перед покупателем (публичная оферта). |
| 3 | **п. 1 vs п. 3 vs п. 4** | **Конфликт лимитов.** <br>Если добавить 5 разных товаров (п. 3) по 10 штук каждый (п. 1), получится 50 товаров. Но п. 4 ограничивает сумму до 20 штук. | Неясно, какой лимит приоритетнее. Пользователь может столкнуться с ошибкой, не понимая, какой именно лимит он нарушил. |
| 4 | **п. 11** | **Нечеткое требование.** <br>Формулировка "по утрам и вечерам" не является техническим требованием. | Невозможно запрограммировать "утро" без указания конкретного временного интервала и часового пояса пользователя. |
| 5 | **п. 10, 11** | **Смешивание контекстов.** <br>Требования к рекламному блоку находятся внутри требований к функционалу корзины. | Усложняет чтение и поддержку документации. Реклама должна быть вынесена в отдельный блок требований. |

---

## 2. Исправленная версия ТЗ

Ниже представлена скорректированная версия требований, устраняющая противоречия.
*Принятые решения: цена актуализируется (как в п. 13), удаление через 0 доступно (как в п. 9), приоритет общего лимита товаров.*

### 2.1. Управление товарами
1.  Пользователь может добавить товар в корзину.
2.  В корзине может находиться **не более 5 различных наименований** (SKU) товаров.
3.  Количество единиц одного товара ограничено складскими остатками, но не может превышать **10 штук**.
4.  Суммарное количество всех единиц товара в корзине не может превышать **20 штук**.
5.  При попытке добавления товара сверх установленных лимитов (п. 2, 3, 4) система отображает сообщение: *"Лимит корзины превышен"*.

### 2.2. Изменение состава корзины
1.  Пользователь может изменять количество товара с шагом 1.
2.  При уменьшении количества товара до 0, товар **автоматически удаляется** из корзины.
3.  Для каждого товара предусмотрена отдельная кнопка "Удалить", удаляющая позицию целиком.

### 2.3. Ценообразование
1.  На странице корзины для каждой позиции отображаются: название, количество, актуальная цена за единицу, общая стоимость позиции.
2.  **Актуализация цены:** Если цена товара изменилась в каталоге, она должна автоматически обновиться в корзине пользователя. Пользователь должен быть уведомлен об изменении стоимости (визуальный маркер или сообщение).

### 2.4. Рекламный блок
1.  В корзине предусмотрен блок "Рекомендуемые товары" (реклама).
2.  Рекламный блок отображается в будние дни в следующие интервалы (по локальному времени пользователя):
    *   Утро: 07:00 – 11:00
    *   Вечер: 18:00 – 22:00

---

## 3. Вопросы к бизнесу (Q&A)

1.  **Про фиксацию цены:** В п. 7 исходного ТЗ говорилось о фиксации цены. Действительно ли мы хотим обновлять цену (п. 13)? *Риск:* Если пользователь положил товар по скидке, а пока оформлял, скидка кончилась — это вызовет негатив. Возможно, стоит бронировать цену на N минут?
2.  **Про лимиты:** Ограничение в 20 товаров суммарно кажется слишком строгим для продуктового магазина ("Петрушка Зеленая"). Если пользователь хочет купить 21 йогурт, мы запретим ему?
3.  **Про рекламу:** Что показывать в рекламном блоке в выходные дни или днем в будни? Блок должен скрываться или показывать товары без приоритета?
4.  **Про недоступные товары:** Что должно происходить с товаром в корзине, если он закончился на складе, пока пользователь гулял по сайту? (Предлагаю: делать его неактивным и блокировать кнопку "Оформить").
